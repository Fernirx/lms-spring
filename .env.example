# ========================================
# LMS Application Environment Variables
# ========================================

# ========== DATABASE ==========
DB_HOST=mysql
DB_PORT=3306
DB_EXTERNAL_PORT=3307
DB_NAME=lms_db
DB_USERNAME=lms_user
DB_PASSWORD=lms_pass
DB_ROOT_PASSWORD=root
DB_TIMEZONE=Asia/Ho_Chi_Minh
DB_CREATE_IF_NOT_EXIST=true
DB_USE_SSL=false
DB_ALLOW_PUBLIC_KEY_RETRIEVAL=true

# Database Connection Pool
DB_POOL_SIZE=10
DB_POOL_MIN_IDLE=5
DB_CONNECTION_TIMEOUT=30000
DB_IDLE_TIMEOUT=600000
DB_MAX_LIFETIME=1800000
DB_TEST_QUERY='SELECT 1'

# ============ APP ============
APP_NAME=lms-spring

# =========== SERVER ===========
HOST_PORT=8080
SERVER_PORT=8080
SERVER_CONTEXT_PATH=/api/lms
SERVER_MAX_THREADS=200
SERVER_MIN_THREADS=10
SERVER_CONNECTION_TIMEOUT=20000
SERVER_ACCEPT_COUNT=100

# ============= JPA ============
JPA_DDL_AUTO=none
JPA_SHOW_SQL=true
HIBERNATE_DIALECT=org.hibernate.dialect.MySQL8Dialect
HIBERNATE_FORMAT_SQL=true
HIBERNATE_SQL_COMMENTS=true
HIBERNATE_BATCH_SIZE=20
HIBERNATE_ORDER_INSERTS=true
HIBERNATE_ORDER_UPDATES=true

# ========= SECURITY & JWT =========
# IMPORTANT: Generate a strong secret for production!
JWT_SECRET=ChangeThisJWTSecretInProductionUse256BitKeyHere
JWT_EXPIRATION=15m
JWT_REFRESH_EXPIRATION=7d
JWT_RESET_PASSWORD_EXPIRATION=15m
JWT_ISSUER=LMS

# ========= CORS & FRONTEND =========
CORS_ALLOWED_ORIGINS=https://yourdomain
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS,PATCH
CORS_ALLOWED_HEADERS=*
CORS_ALLOW_CREDENTIALS=true
CORS_MAX_AGE=3600

FRONTEND_BASE_URL=https://yourdomain
FRONTEND_LOGIN_URL=https://yourdomain/login

# ============ MAIL ============
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=your-email@gmail.com
MAIL_PASSWORD=your-app-password
MAIL_SMTP_AUTH=true
MAIL_STARTTLS_ENABLE=true
MAIL_CONNECTION_TIMEOUT=5000
MAIL_TIMEOUT=5000
MAIL_WRITE_TIMEOUT=5000

# ===== FILE UPLOAD LIMITS =====
MAX_FILE_SIZE=10MB
MAX_REQUEST_SIZE=15MB
FILE_SIZE_THRESHOLD=2KB
UPLOAD_TEMP_DIR=/tmp

# ===== JSON CONFIGURATION =====
JACKSON_TIMEZONE=Asia/Ho_Chi_Minh
JACKSON_DATE_FORMAT='yyyy-MM-dd HH:mm:ss'
JACKSON_INCLUSION=NON_NULL

# ===== OTP CACHE CONFIGURATION =====
OTP_MAXIMUM_SIZE=10000
OTP_EXPIRE_AFTER=5m
OTP_MAX_ATTEMPTS=5
OTP_INITIAL_CAPACITY=100
OTP_MAX_RESEND=3
OTP_RESEND_COOLDOWN=60s

# ===== SWAGGER / OPENAPI ======
SWAGGER_API_DOCS_PATH=/v3/api-docs
SWAGGER_UI_PATH=/swagger-docs
SWAGGER_ENABLED=true
SWAGGER_UI_ENABLED=true
SWAGGER_OPERATIONS_SORTER=method
SWAGGER_TAGS_SORTER=alpha
SWAGGER_DISPLAY_REQUEST_DURATION=true
SWAGGER_SHOW_ACTUATOR=true

# ========= ACTUATOR ===========
ACTUATOR_EXPOSED_ENDPOINTS=health,info,env,metrics,beans
ACTUATOR_BASE_PATH=/actuator
ACTUATOR_HEALTH_SHOW_DETAILS=always
ACTUATOR_HEALTH_SHOW_COMPONENTS=when-authorized
ACTUATOR_HEALTH_DB=true
ACTUATOR_HEALTH_MAIL=true

# =========== ERROR HANDLING ===========
ERROR_INCLUDE_MESSAGE=always
ERROR_INCLUDE_BINDING=always
ERROR_INCLUDE_STACKTRACE=on_param

# =========== LOGGING ===========
LOG_LEVEL_ROOT=INFO
LOG_LEVEL_APP=DEBUG
LOG_LEVEL_SPRING_WEB=DEBUG
LOG_LEVEL_SPRING_SECURITY=INFO
LOG_LEVEL_HIBERNATE_SQL=DEBUG
LOG_LEVEL_HIBERNATE_PARAMS=INFO